<html><head><title>ITS</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="cpanStyle" type="text/css" href="cpanStyle.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="_grygrnw.css" media="all" >

<script type="text/javascript" src="_podly.js"></script>

</head>
<body class='pod'>
<!--Generated by Pod::Simple::HTML. Do not modify.-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#EXPORTS'>EXPORTS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#its_ns'>its_ns</a>
    <li class='indexItem indexItem2'><a href='#xlink_ns'>xlink_ns</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new'>new</a>
    <li class='indexItem indexItem2'><a href='#eval_rules'>eval_rules</a>
    <li class='indexItem indexItem2'><a href='#get_doc_type'>get_doc_type</a>
    <li class='indexItem indexItem2'><a href='#get_doc'>get_doc</a>
    <li class='indexItem indexItem2'><a href='#get_rules'>get_rules</a>
    <li class='indexItem indexItem2'><a href='#get_containers'>get_containers</a>
    <li class='indexItem indexItem2'><a href='#get_matches'>get_matches</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#TODO'>TODO</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>ITS - Work with ITS-decorated XML</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use ITS;
    use feature &#39;say&#39;;
    my $ITS = ITS-&#62;new(file =&#62; &#39;myITSfile.xml&#39;);
    my $rules = $ITS-&#62;get_rules;
    for my $rule (@$rules){
        say $rule-&#62;type;
        for my $match (@{ $ITS-&#62;get_matches($rule) }){
            say &#34;$_ =&#62; $match-&#62;{$_}&#34; for keys %$match;
        }
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This module is for working with ITS decorated XML or HTML documents. It allows you to resolve all of the global and find matches for each of them.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXPORTS"
>EXPORTS</a></h1>

<p>The following function may be exported:</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="its_ns"
><code>its_ns</code></a></h2>

<p>Returns the ITS namespace URI.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="xlink_ns"
><code>xlink_ns</code></a></h2>

<p>Returns the xlink namespace URI (<code>xlink:href</code> is used by the <code>its:rules</code> element to import external rules).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new"
><code>new</code></a></h2>

<p>Returns an ITS object instance. Arguments: The first is either &#39;xml&#39; or &#39;html&#39; to indicate the type of document being parsed. After that, you must specify &#39;doc&#39; and may also optionally specify &#39;rules&#39; parameters. The value of these parameters should be either a string containing a file path or a string reference containing actual ITS data. The &#39;doc&#39; argument should point to the document to which ITS data is being applied, and the &#39;rules&#39; argument should point to a document containing the ITS rules to apply (this may only be an XML document, not an HTML document).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="eval_rules"
><code>eval_rules</code></a></h2>

<p>This method detects any ITS rules contained or referenced by the document (or the separate rules document), setting the values that can be obtained via <code>get_containers</code> and <code>get_rules</code>. This is always run by the <code>new</code> method, but if the document (retrievable via <code>get_dom</code>) is edited, the ITS rules contents may have changed, making it necessary to call this method.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_doc_type"
><code>get_doc_type</code></a></h2>

<p>Returns either &#39;html&#39; or &#39;xml&#39; indicating the type of file being represented.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_doc"
><code>get_doc</code></a></h2>

<p>Returns the ITS::DOM object created from the input document.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_rules"
><code>get_rules</code></a></h2>

<p>Returns an arrayref containing the ITS rule elements (in the form of ITS::Rule objects) which are to be applied to the document, in the order in which they will be applied.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_containers"
><code>get_containers</code></a></h2>

<p>Returns an arrayref containing ITS::RuleContainer objects, one for each <code>its:rules</code> element found in the document or externally. The containers are returned in order of application (the order that their rules should be applied in).</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="get_matches"
><code>get_matches</code></a></h2>

<p>Argument: <code>ITS::Rule</code> object.</p>

<p>Returns an array ref of matches on this ITS document against the input rule. Each element of the list is a hash ref containing at least one key, <code>selector</code>, whose value is the document node which the rule selector matched. Any other keys are names of pointer attributes, and their values are their matched document nodes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>In browsers, all HTML is considered to be in the <code>http://www.w3.org/1999/xhtml</code> namespace, but XPath expressions use this as a default namespace. This is not currently possible with this module, so the XHTML namespace must be used explicitly in rules for HTML documents, like so:</p>

<pre>    &#60;its:rules xmlns:its=&#34;http://www.w3.org/2005/11/its&#34;
        xmlns:h=&#34;http://www.w3.org/1999/xhtml&#34;
        version=&#34;2.0&#34;&#62;
          &#60;its:translateRule selector=&#34;//h:p&#34; translate=&#34;yes&#34;/&#62;
    &#60;/its:rules&#62;</pre>

<p>Currently rule selection will not work for the <code>id()</code> XPath expression in HTML documents.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TODO"
>TODO</a></h1>

<p>This module does not support querying individual elements for ITS information. This would be very useful, but it would require the implementation of inheritance and per-category knowledge (currently there is none!). Reference <a href="http://www.w3.org/International/its/wiki/ITS_Processor_Interface" class="podlinkurl"
>http://www.w3.org/International/its/wiki/ITS_Processor_Interface</a> for an idea of what is wanted. Note that if this functionality is added, we should stop producing a warning for absence of rules from a file.</p>

<p>ITS allows for other types of selectors. This module, however, only allows XPath selectors. CSS selectors could be implemented, for example, with <code>HTML::Selector::XPath</code>.</p>

<p>Currently this module does not check ITS version. All rules are assumed to be ITS version 2.0.</p>

<p>Section 5.3.5 of the ITS spec mentions that implementers should provide a way to set default values for parameters. This would be useful, but what is the menaing of i&#60;default&#62; value here? Are there documents without param declarations but with XPaths that contain variables? Or should this just be a mechanism to allow the user to set the value of a param, no matter what values are present in the document?</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>The ITS 2.0 specification for XML and HTML5: <a href="http://www.w3.org/TR/its20/" class="podlinkurl"
>http://www.w3.org/TR/its20/</a>.</p>

<p>ITS interest group mail archives: <a href="http://lists.w3.org/Archives/Public/public-i18n-its-ig/" class="podlinkurl"
>http://lists.w3.org/Archives/Public/public-i18n-its-ig/</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Nathan Glenn &#60;garfieldnate@gmail.com&#62;</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013 by DFKI.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
